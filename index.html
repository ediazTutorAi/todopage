<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My To-Do + Reminders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --pad: 18px; --radius: 14px; }
    body { font-family: system-ui, sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem;
           font-size: 1.25rem; line-height: 1.6; background: #fafafa; color: #222; }
    header { display: flex; flex-wrap: wrap; align-items: center; gap: 1rem; justify-content: space-between; }
    h1 { font-size: 1.8rem; margin: 0; }
    .row { display: flex; gap: .8rem; margin: 1rem 0; flex-wrap: wrap; }
    input, button, select {
      padding: 0.9rem 1.1rem; border-radius: 12px; border: 2px solid #ccc;
      font-size: 1.1rem;
    }
    input[type="text"] { flex: 1 1 320px; }
    button { cursor: pointer; background: #f0f0f0; }
    button:hover { background: #e2e2e2; }
    .pill { border-radius: 999px; font-weight: bold; }
    ul { list-style: none; padding: 0; margin: 1.5rem 0; }
    li { display: grid; grid-template-columns: 1fr auto; gap: .6rem; align-items: center;
         padding: 1rem; border: 2px solid #ddd; border-radius: var(--radius); margin-bottom: .8rem;
         background: #fff; }
    .title { display: flex; gap: 1rem; align-items: center; }
    .title input[type="checkbox"] { width: 1.4rem; height: 1.4rem; }
    .done .label { text-decoration: line-through; color: #777; }
    .meta { font-size: 1rem; color: #555; margin-top: .4rem; }
    .overdue { border-color: #e66; background: #ffecec; }
    .soon { border-color: #f6a500; background: #fff6e6; }
    .controls button { margin-left: .4rem; font-size: 1.1rem; }
    .footer { display:flex; justify-content: space-between; align-items:center;
              margin-top: 1rem; font-size: 1.1rem; }
    .chip { padding: .4rem .9rem; border: 2px solid #ccc; border-radius: 999px; cursor: pointer; }
    .chip.active { background: #222; color: #fff; border-color:#222; }
    .hint { font-size: 1.1rem; color: #333; font-weight: bold; }
  </style>
</head>
<body>
  <header>
    <h1>‚úÖ My To-Do + Reminders</h1>
    <div class="row" style="margin:0">
      <button id="notifyBtn" class="pill">üîî Notifications</button>
      <button id="hardResetBtn" class="pill">‚ôªÔ∏è Hard Reset</button>
    </div>
  </header>

  <div class="row">
    <input id="taskText" type="text" placeholder="New task (press Enter to add)" />
    <input id="taskDue" type="datetime-local" />
    <select id="taskTag" title="Tag">
      <option value="">tag‚Ä¶</option>
      <option>work</option>
      <option>home</option>
      <option>teaching</option>
      <option>research</option>
    </select>
    <button id="addBtn">Add</button>
  </div>

  <div class="row" style="align-items:center">
    <span class="hint">Filter:</span>
    <span class="chip active" data-filter="all">All</span>
    <span class="chip" data-filter="open">Open</span>
    <span class="chip" data-filter="done">Done</span>
    <span class="chip" data-filter="overdue">Overdue</span>
    <span class="chip" data-filter="soon">Due in 24h</span>
  </div>

  <ul id="list"></ul>

  <div class="footer">
    <span id="count"></span>
    <div>
      <button id="exportBtn">Export</button>
      <input id="importFile" type="file" accept="application/json" style="display:none" />
      <button id="importBtn">Import</button>
    </div>
  </div>

<script>
(() => {
  const STORAGE_KEY = "todo.bigfont";
  let tasks = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
  const list = document.getElementById("list");
  const taskText = document.getElementById("taskText");
  const taskDue = document.getElementById("taskDue");
  const taskTag = document.getElementById("taskTag");
  const count = document.getElementById("count");
  const addBtn = document.getElementById("addBtn");
  const chips = [...document.querySelectorAll(".chip")];
  let filter = "all";

  function save() { localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks)); }
  function fmt(dt) { return new Date(dt).toLocaleString(); }
  function isOverdue(t) { return t.due && !t.done && new Date(t.due) < new Date(); }
  function isSoon(t) {
    if (!t.due || t.done) return false;
    const d = new Date(t.due) - new Date();
    return d > 0 && d <= 24*60*60*1000;
  }

  function render() {
    list.innerHTML = "";
    let shown = tasks.filter(t => {
      switch (filter) {
        case "open": return !t.done;
        case "done": return t.done;
        case "overdue": return isOverdue(t);
        case "soon": return isSoon(t);
        default: return true;
      }
    });

    shown.forEach((t, i) => {
      const li = document.createElement("li");
      li.className = (t.done ? "done " : "") + (isOverdue(t) ? "overdue " : isSoon(t) ? "soon " : "");
      li.innerHTML = `
        <div class="title">
          <input type="checkbox" ${t.done ? "checked": ""} data-action="toggle" data-idx="${i}">
          <span class="label">${t.text}</span>
        </div>
        <div class="controls">
          <button data-action="edit" data-idx="${i}">‚úèÔ∏è</button>
          <button data-action="delete" data-idx="${i}">üóë</button>
          <div class="meta">${t.due ? "‚è∞ " + fmt(t.due) : ""}</div>
        </div>
      `;
      list.appendChild(li);
    });

    const open = tasks.filter(t=>!t.done).length;
    count.textContent = `${tasks.length} tasks ¬∑ ${open} open`;
    save();
  }

  function add() {
    const text = taskText.value.trim();
    if (!text) return;
    tasks.unshift({ text, due: taskDue.value || "", done: false, tag: (taskTag.value||"") });
    taskText.value = ""; taskDue.value = "";
    render();
  }

  addBtn.addEventListener("click", add);
  taskText.addEventListener("keydown", e => { if (e.key === "Enter") add(); });
  list.addEventListener("click", e => {
    const btn = e.target.closest("[data-action]");
    if (!btn) return;
    const idx = +btn.dataset.idx;
    const action = btn.dataset.action;
    if (action === "toggle") tasks[idx].done = !tasks[idx].done;
    if (action === "delete") tasks.splice(idx,1);
    if (action === "edit") {
      const newText = prompt("Edit task:", tasks[idx].text);
      if (newText !== null) tasks[idx].text = newText;
    }
    render();
  });

  chips.forEach(chip => chip.addEventListener("click", () => {
    chips.forEach(c=>c.classList.remove("active"));
    chip.classList.add("active");
    filter = chip.dataset.filter;
    render();
  }));

  render();
})();
</script>
</body>
</html>