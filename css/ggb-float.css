/* ---------------------------------
   FLOATING GEO GEBRA WINDOW
   --------------------------------- */
.ggb-float {
  position: fixed;
  inset: auto 16px 16px auto;      /* bottom-right by default */
  width: clamp(360px, 38vw, 520px);
  height: clamp(260px, 34vh, 420px);
  background: #fff;
  border: 1px solid var(--line);
  border-radius: 12px;
  box-shadow: 0 18px 48px rgba(0,0,0,0.22);
  display: grid;
  grid-template-rows: auto 1fr;
  z-index: 1000;
  transform-origin: bottom right;
  transform: scale(0.98);
  opacity: 0;
  pointer-events: none;
  transition: transform 160ms ease, opacity 160ms ease;
}

.ggb-float[aria-hidden="false"] {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

.ggb-float.expanded {
  inset: 50% auto auto 50%;
  width: min(80vw, 1100px);
  height: min(80vh, 800px);
  transform: translate(-50%, -50%) scale(1);
  border-radius: 14px;
  box-shadow: 0 30px 90px rgba(0,0,0,0.35);
}

.ggb-float-header {
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
  padding: 6px 8px;
  border-bottom: 1px solid var(--line);
  background: #f9fafb;
  border-top-left-radius: 12px; border-top-right-radius: 12px;
  cursor: move;                    /* drag handle */
}

.ggb-float-title { font-weight: 600; color: var(--muted); }

.ggb-float-host {
  position: relative;
  width: 100%;
  height: 100%;
  background: #fafafa;
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
  overflow: hidden;         /* contain edges when expanded */
}

.ggb-float-host .ggb-frame {
  position: absolute;
  inset: 0;                 /* top/right/bottom/left = 0 */
  width: 100%;
  height: 100%;
  border: 0;
  display: block;
}

/* Backdrop (only when expanded) */
.ggb-backdrop {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(2px);
  z-index: 999;
}